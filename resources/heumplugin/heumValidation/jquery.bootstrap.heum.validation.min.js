/**
 * version : 0.2
 * developer : kwangheum
 * email : myrkh1213@gmail.com
 * hompage : http://kwangheum.blogspot.kr
*/
(function(e,t,n,r){function o(t,n){this.element=t;this.options=e.extend({},s,n);this._defaults=s;this._name=i;this.init()}function u(e,t){e.stopPropagation();e.preventDefault();if(e.type==="touchend"){t.off("click")}}function a(e){return/true/i.test(e)}function f(e,t,n){e.validationGroup.removeClass("has-warning").removeClass("has-error").removeClass("has-success");e.validationGroup.removeClass("glyphicon-warning-sign").removeClass("glyphicon-remove").removeClass("glyphicon-ok");if(t=="success"){e.validationGroup.addClass("has-success");e.validationFeed.addClass("glyphicon-ok");e.validationText.text(n)}else if(t=="error"){e.validationGroup.addClass("has-error");e.validationFeed.addClass("glyphicon-remove");e.validationText.text(n)}else if(t=="warning"){e.validationGroup.addClass("has-warning");e.validationFeed.addClass("glyphicon-warning-sign");e.validationText.text(n)}else if(t=="default"){e.validationText.text(n)}}function l(e){var t=/^([\w-\.]+)@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.)|(([\w-]+\.)+))([a-zA-Z]{2,4}|[0-9]{1,3})(\]?)$/;return t.test(e)}function c(e){var t=/^[0-9-+]+$/;if(t.test(e)){var n=/^(01[016789])-?\d{3,4}-?\d{4}$/;var r=/^(070|02|031|032|033|041|042|043|051|052|053|054|055|061|062|063|064)-?\d{3,4}-?\d{4}$/;if(n.test(e)||r.test(e)){return""}else{return"연락처 형식에 맞지 않습니다"}}else{return"연락처는 숫자 또는 + 또는 - 만 사용하실 수 있습니다"}}function h(t,n){if(!n.nullPermit){if(p(t)){return"빈칸을 허용하지 않습니다"}}if(n.number&&!e.isNumeric(t)){return"숫자만 입력할 수 있습니다"}if(n.min>0){if(t.length<=n.min){return n.min+"자 이상 작성해주시길 바랍니다"}}if(n.max>0){if(t.length>n.max){return"최대 길이는 "+n.max+"자 까지입니다"}}return""}function p(e){if(e==r){return true}else{if(e.replace(/ /,"")==""){return true}else{return false}}}function d(t){var n="";if(t.name!=r){if(t.min>0){if(e("input[name="+t.name+"]:checked").size()<t.min){n=t.min+"개 이상 선택해주시길 바랍니다"}}if(t.max>0){if(e("input[name=checkbox]:checked").size()<t.min){n=t.max+"개 이하로 선택해주시길 바랍니다"}}}return n}function v(t){if(t.name!=r&&!t.nullPermit){if(e("input[name="+t.name+"]:checked").size()>0){return""}else{return"값을 선택해주세요"}}}function m(e,t){var t={min:e.data("heum-min")==r?0:e.data("heum-min"),max:e.data("heum-max")==r?0:e.data("heum-max"),number:e.data("heum-number")==r?false:a(e.data("heum-number")),nullPermit:e.data("heum-null")==r?true:a(e.data("heum-null")),name:e.attr("name"),id:e.attr("id"),validationConfirm:e.data("heum-validation")==r?true:a(e.data("heum-validation")),validationGroup:e.parents("div.heum-validation-group"),validationValue:e.parents("div.heum-validation-group").find(".heum-validation-value"),validationText:e.parents("div.heum-validation-group").find(".heum-validation-text"),validationLabel:e.parents("div.heum-validation-group").find("label"),validationFeed:e.parents("div.heum-validation-group").find(".heum-validation-feed")},n=false;if(e.is("input")){if(e.attr("type")=="email"){if(l(e.val())){var i=h(e.val(),t);n=!p(i);if(n){f(t,"error",i)}else{f(t,"success","사용하셔도 좋습니다")}t.validationValue.val(!n)}else{f(t,"error","올바른 이메일을 입력해주세요");t.validationValue.val(false);n=true}}else if(e.attr("type")=="tel"){var i=c(e.val());var s=h(e.val(),t);if(!p(s)){i=s}n=!p(i);f(t,n?"error":"success",i);t.validationValue.val(!n)}else if(e.attr("type")=="checkbox"){var i=d(t);n=!p(i);f(t,n?"error":"success",i);t.validationValue.val(!n)}else if(e.attr("type")=="radio"){t.nullPermit=e.data("heum-null")==r?false:a(e.data("heum-null"));var i=v(t);n=!p(i);f(t,n?"error":"success",i);t.validationValue.val(!n)}else{var i=h(e.val(),t);n=!p(i);f(t,n?"error":"success",i);t.validationValue.val(!n)}}}function g(e){var t=e.data("heum-validation")==r?true:a(e.data("heum-validation"));if(t){m(e)}}var i="heumValidation",s={};o.prototype={init:function(){var t=t,n=e(this.element),r=this.options;if(!n.hasClass("form-horizontal")){n.addClass("form-horizontal")}n.find("input:visible,textarea:visible").each(function(){var t=e(this);var n=e("<label/>",{"class":"col-md-2 control-label",text:e(this).data("heum-label"),"for":e(this).attr("id")});var r=e("<div/>",{"class":"heum-validation-group form-group has-feedback"});var i=e("<div/>",{"class":"col-md-10"});var s=e("<span/>",{"class":"heum-validation-feed glyphicon form-control-feedback"});var o=e("<span/>",{"class":"heum-validation-text control-label"});var u=e("<input/>",{"class":"heum-validation-value",type:"hidden",value:!a(e(this).data("heum-validation"))});if(e(this).attr("type")!="checkbox"&&e(this).attr("type")!="radio"){e(this).wrap(i).parent("div").append(s,o,u);e(this).parent("div").wrap(r);e(this).parents("div.heum-validation-group").prepend(n)}else{if(e("input[name="+e(this).attr("name")+"]").index(e(this))==0){e("input[name="+e(this).attr("name")+"]").wrapAll(i).parent("div").append(o,u);e(this).parent("div").wrap(r);var l=e("<label/>",{"class":"col-md-2 control-label",text:e(this).data("heum-group-label")});e(this).parents(".heum-validation-group").find(".heum-validation-text").wrap("<div/>");e(this).parents(".heum-validation-group").prepend(l)}e(this).wrap(n.removeClass("col-md-2").addClass(e(this).attr("type")+"-inline"))}if(e(this).attr("type")!="checkbox"&&e(this).attr("type")!="radio"){t.keyup(function(){g(e(this))})}else{t.change(function(){var t={validationGroup:e(this).parents("div.heum-validation-group"),validationValue:e(this).parents("div.heum-validation-group").find(".heum-validation-value"),validationText:e(this).parents("div.heum-validation-group").find(".heum-validation-text"),validationFeed:e(this).parents("div.heum-validation-group").find(".heum-validation-feed")};f(t,"default","");t.validationValue.val(false)})}});n.find("*[type=reset]").on("click touchend",function(t){u(t,e(this));n.find("input[type=checkbox],input[type=radio]").prop("checked",false);n.heumValidation().reset()});n.submit(function(){n.find("button,a").button("loading");var t=false;n.find("input:visible,textarea:visible").each(function(){if(e(this).attr("type")=="checkbox"||e(this).attr("type")=="radio"){if(e("input[name="+e(this).attr("name")+"]").index(e(this))==0){g(e(this))}}else{g(e(this))}});n.find(".heum-validation-value").each(function(){if(!a(e(this).val())){t=true;return false}});if(t){n.find("button,a").button("reset");toastr.clear();toastr.error("값을 제대로 입력해주시길 바랍니다");return false}})}};e.fn[i]=function(t){return this.each(function(){if(!e.data(this,"plugin_"+i)){e.data(this,"plugin_"+i,new o(this,t))}else{e.fn.extend({reset:function(){e(this).find(".heum-validation").val(false);e(this).find(".has-error").removeClass("has-error");e(this).find(".has-success").removeClass("has-success");e(this).find(".has-warning").removeClass("has-warning");e(this).find(".glyphicon-remove").removeClass("glyphicon-remove");e(this).find(".glyphicon-ok").removeClass("glyphicon-ok");e(this).find(".glyphicon-warning-sign").removeClass("glyphicon-warning-sign");e(this).find(".heum-validation-text").text("");e(this).find("input:not(input[type=radio],input[type=checkbox]):visible,textarea:visible").val("")},parseBoolean:function(t){return a(e(t).val())},emailValidation:function(t){return l(e(t).val())},phoneValidation:function(t){return c(e(t).val())},changeView:function(t,n,r){var i={validationGroup:e(t).parents("div.heum-validation-group"),validationValue:e(t).parents("div.heum-validation-group").find(".heum-validation-value"),validationText:e(t).parents("div.heum-validation-group").find(".heum-validation-text"),validationFeed:e(t).parents("div.heum-validation-group").find(".heum-validation-feed")};f(i,n,r)},isEmpty:function(t){return p(e(t).val())},validations:function(t){m(e(t))}})}})}})(jQuery,window,document)